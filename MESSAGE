* The XUL for the toolbar in which the search (magnifying glass) button should be added is: https://github.com/zotero/zotero/blob/72481b072e7a2d95a98eba6425c463b90fbb2574/chrome/content/zotero/zoteroPane.xul#L109-L110 at line 110 or 130 (below or above `<toolbarbutton id="zotero-tb-library-add-menu"` element)
* The magnifying glass icon should presumably be this one: [chrome/skin/default/zotero/toolbar-advanced-search.png](https://github.com/zotero/zotero/blob/72481b072e7a2d95a98eba6425c463b90fbb2574/chrome/skin/default/zotero/toolbar-advanced-search.png), or an overlay of a magnifying glass on top of a folder (I can make this icon if that option is chosen)
* The search field should be inserted in https://github.com/zotero/zotero/blob/72481b072e7a2d95a98eba6425c463b90fbb2574/chrome/content/zotero/zoteroPane.xul#L346 just above the `<tree id="zotero-collections-tree"` at line 346
* The search field should be similar to the one used for the tag search: https://github.com/zotero/zotero/blob/72481b072e7a2d95a98eba6425c463b90fbb2574/chrome/content/zotero/bindings/tagselector.xml#L1168-L1171
The following code seems to be a starting point:
```
					<textbox id="collections-lookup-textbox" flex="0" type="search" timeout="250" dir="reverse"
						oncommand="document.getBindingParent(this).handleKeyPress(); event.stopPropagation()"
						onkeypress="if (event.keyCode == event.DOM_VK_ESCAPE) { document.getBindingParent(this).handleKeyPress(true); }"/>
```
* When the zotero collections & tags pane (zotero pane) is collapsed, should the search button still be visible?
  * If it should still be visible, clicking on it should pop out the zotero pane with a default width or with the last used width if that information is available somewhere.
  * If it should not be visible, then when the zotero pane gets collapsed, the search button should be hidden, and when the zotero pane gets shown, the search button should be made visible again.

I think it would be nice to make the search field visible/hidden state persist (and show magnifying glass button in a depressed state to show that the search field is enabled), so that users with a lot of collections can simply press the button once. If that state was not persistant, users which occasionally need the search bar would still need a button to close it, unless they restart Zotero, so there wouldn't be any loss for these users (they would still need two clicks: one to enable and one to hide).

Should the search simply gather the list of all collections (i.e. same as pressing <kbd>+</kbd> with the focus on each library in turn), and filter this to hide the non-matching collections from the view? Or should the search make a database query (more scalable for *very* large number of collections, but more work to implement) and display these results?

Things left to decide:

- [ ] Decide whether to hide the search button when the collections pane is collapsed: **yes**/**no**?
- [ ] Decide whether to simply filter the list of all collections or whether to perform a database query: **filter list**/**database query**?
- [ ] Decide whether to use the magnifying glass icon or whether to overlay it on a folder icon: **without folder**/**with folder**?